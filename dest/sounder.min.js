/*!
 * @license sounder.js v0.13.0
 * (c) 2014 sugarshin https://github.com/sugarshin
 * License: MIT
 */
(function(){var t={}.hasOwnProperty,e=[].slice;!function(n){"use strict";var i,r,o,s;return r=function(){function e(){}return e.prototype.extend=function(e){var n,i,r,o,s,a;for(e||(e={}),n=o=1,s=arguments.length;s>=1?s>o:o>s;n=s>=1?++o:--o)if(arguments[n]){a=arguments[n];for(i in a)t.call(a,i)&&(r=a[i],e[i]=r)}return e},e.prototype.getChildNode=function(t){var e,n,i,r,o;for(n=[],o=t.children,i=0,r=o.length;r>i;i++)e=o[i],8!==e.nodeType&&n.push(e);return n},e.prototype.isArray=function(){return Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)}}(),e.prototype.getRandomInt=function(t,e){return Math.floor(Math.random()*(e-t+1))+t},e.prototype.requestAnimeFrame=function(){return requestAnimationFrame?function(t){return requestAnimationFrame(t)}:webkitRequestAnimationFrame?function(t){return webkitRequestAnimationFrame(t)}:mozRequestAnimationFrame?function(t){return mozRequestAnimationFrame(t)}:msRequestAnimationFrame?function(t){return msRequestAnimationFrame(t)}:oRequestAnimationFrame?function(t){return oRequestAnimationFrame(t)}:function(t){return setTimeout(t,1e3/60)}}(),e.prototype.cancelAnimeFrame=function(){return cancelAnimationFrame?function(t){return cancelAnimationFrame(t)}:webkitCancelAnimationFrame?function(t){return webkitCancelAnimationFrame(t)}:mozCancelAnimationFrame?function(t){return mozCancelAnimationFrame(t)}:msCancelAnimationFrame?function(t){return msCancelAnimationFrame(t)}:oCancelAnimationFrame?function(t){return oCancelAnimationFrame(t)}:function(t){return clearTimeout(t)}}(),e.prototype.remove=function(t){return t.parentNode.removeChild(t)},e}(),i=function(){function t(t){this.options=this.util.extend({},this.defaults,t)}return t.prototype.util=new r,t.prototype._init=function(){var t,e,n,i,r,o,s,a,u,m,l;for(o=document.createElement("div"),o.className="sounder-wrapper",n=document.createDocumentFragment(),i=s=0,m=this.options.column;m>=0?m>s:s>m;i=m>=0?++s:--s)e=document.createElement("div"),e.className="sounder-col",r=document.createElement("div"),r.className="sounder-fragment",this._stylingPiece(r),e.appendChild(r),n.appendChild(e);for(o.appendChild(n),this._bars=this.util.getChildNode(o),l=this._bars,a=0,u=l.length;u>a;a++)t=l[a],t.style.cssText="display: inline-block; vertical-align: bottom;";return this._wrapper=o,this._wrapper.style.cssText="height: "+1.5*this.options.size[1]*this.options.maxHeight+"px; line-height: "+1.5*this.options.size[1]*this.options.maxHeight+"px;"},t.prototype._animation=function(){var t,e;return this._isPlaying=!0,e=(new Date).getTime(),(t=function(n){return function(){var i;return n._timerID=n.util.requestAnimeFrame.call(n,t),i=(new Date).getTime(),i-e>=100-n.options.speed?(n._barsAdjust(),e=(new Date).getTime()):void 0}}(this))()},t.prototype._stylingPiece=function(t){var e,n;return this.util.isArray(this.options.color)?(n=this.options.color.length-1,e=this.options.color[this.util.getRandomInt(0,n)]):e=this.options.color,t.style.cssText="width: "+this.options.size[0]+"px; height: "+this.options.size[1]+"px; margin: 0 1px "+Math.floor(this.options.size[1]/2)+"px; background: "+e+";"},t.prototype._render=function(t){return t.appendChild(this._wrapper)},t.prototype._addFragment=function(t){var e;return e=document.createElement("div"),e.className="sounder-fragment",this._stylingPiece(e),t.insertBefore(e,t.firstChild)},t.prototype._rmFragment=function(t){var e;return e=this.util.getChildNode(t),e[0].parentNode.removeChild(e[0])},t.prototype._barsAdjust=function(){var t,e,n,i,r,o;for(r=this._bars,o=[],n=0,i=r.length;i>n;n++)t=r[n],e=this.util.getChildNode(t).length,o.push(1===e?this._addFragment(t):e===this.options.maxHeight?this._rmFragment(t):[this._addFragment,this._rmFragment][this.util.getRandomInt(0,1)].call(this,t));return o},t.prototype.defaults={size:[20,4],color:"#e74c3c",column:6,maxHeight:10,autoPlay:!1,speed:60},t.prototype.create=function(t){return this._init(),this._render(t),this.options.autoPlay===!0&&this._animation(),this},t.prototype.play=function(t){return this._isPlaying!==!0&&(this._animation(),"function"==typeof t&&t()),this},t.prototype.pause=function(t){return this._isPlaying===!0&&(this.util.cancelAnimeFrame(this._timerID),this._isPlaying=!1,"function"==typeof t&&t()),this},t.prototype.toggle=function(){var t;return t=1<=arguments.length?e.call(arguments,0):[],this._isPlaying!==!0?this.play(t[0]):this.pause(t[1]),this},t.prototype.stop=function(t){return this.pause(),this.reset(),"function"==typeof t&&t(),this},t.prototype.reset=function(){var t,e,n,i;for(i=this._bars,e=0,n=i.length;n>e;e++)for(t=i[e];t.childNodes[1];)t.removeChild(t.firstChild);return this},t.prototype.destroy=function(t){return this.util.cancelAnimeFrame(this._timerID),null!=this._timerID&&(this._timerID=null),this.util.remove(this._wrapper),"function"==typeof t?t():void 0},t}(),o="document"in n,s="process"in n,(s||o)&&"undefined"!=typeof module&&null!==module&&(module.exports=i),!o||"undefined"!=typeof module&&null!==module?void 0:n.Sounder||(n.Sounder=i)}((this||0).self||global)}).call(this);