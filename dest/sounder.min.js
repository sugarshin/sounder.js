/*!
Sounder.js
License MIT
 */
(function(){var t,n=[].slice;t=function(){function t(t){this.option=h({},o,t)}var i,e,o,r,a,s,u,c,l,h,p,m,f,d;return h=function(t){var n,i,e,o,r,a;for(t=t||{},n=o=1,r=arguments.length;r>=1?r>o:o>r;n=r>=1?++o:--o)if(arguments[n]){a=arguments[n];for(i in a)e=a[i],arguments[n].hasOwnProperty(i)&&(t[i]=e)}return t},p=function(t){var n,i,e,o,r;for(i=[],r=t.children,e=0,o=r.length;o>e;e++)n=r[e],8!==n.nodeType&&i.push(n);return i},f=function(){return Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)}}(),m=function(t,n){return Math.floor(Math.random()*(n-t+1))+t},d=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame||function(t){return window.setTimeout(t,1e3/60)}}(),l=function(){return window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||window.oCancelAnimationFrame||function(t){return window.clearTimeout(t)}}(),o={size:[20,4],color:"#e74c3c",column:6,maxHeight:10,autoPlay:!1,speed:60},s=function(){var t,n,i,e,o,r,a,s,u,l,h;for(r=document.createElement("div"),e=document.createDocumentFragment(),o=a=0,l=this.option.column;l>=0?l>a:a>l;o=l>=0?++a:--a)n=document.createElement("div"),i=document.createElement("div"),i.className="fragment",c.call(this,i),e.appendChild(i),n.className="col",n.appendChild(e),r.appendChild(n);for(this.bars=p(r),h=this.bars,s=0,u=h.length;u>s;s++)t=h[s],t.style.cssText="display: inline-block; vertical-align: bottom;";return this.wrapper=r,this.wrapper.style.cssText="height: "+1.5*this.option.size[1]*this.option.maxHeight+"px; line-height: "+1.5*this.option.size[1]*this.option.maxHeight+"px;"},i=function(){var t,n;return this.isPlaying=!0,n=(new Date).getTime(),(t=function(i){return function(){var o;return i.animeTimer=d(t),o=(new Date).getTime(),o-n>=100-i.option.speed?(e.call(i),n=(new Date).getTime()):void 0}}(this))()},c=function(t){var n,i;return f(this.option.color)?(i=this.option.color.length-1,n=this.option.color[m(0,i)]):n=this.option.color,t.style.cssText="width: "+this.option.size[0]+"px; height: "+this.option.size[1]+"px; margin: 0 1px "+Math.floor(this.option.size[1]/2)+"px; background: "+n},u=function(t){return t.appendChild(this.wrapper)},r=function(t){var n;return n=document.createElement("div"),n.className="fragment",c.call(this,n),t.insertBefore(n,t.firstChild)},a=function(t){var n;return n=p(t),n[0].parentNode.removeChild(n[0])},e=function(){var t;return t=[],t[0]=r,t[1]=a,function(){var n,i,e,o,s,u;for(s=this.bars,u=[],e=0,o=s.length;o>e;e++)n=s[e],i=p(n).length,u.push(1===i?r.call(this,n):i===this.option.maxHeight?a.call(this,n):t[m(0,1)].call(this,n));return u}}(),t.prototype.create=function(t){return s.call(this),u.call(this,t),this.option.autoPlay===!0&&i.call(this),this},t.prototype.play=function(t){return this.isPlaying===!1&&(i.call(this),"function"==typeof t&&t()),this},t.prototype.pause=function(t){return this.isPlaying===!0&&(l(this.animeTimer),this.isPlaying=!1,"function"==typeof t&&t()),this},t.prototype.toggle=function(){var t;return t=1<=arguments.length?n.call(arguments,0):[],this.isPlaying===!1?this.play(t[0]):this.pause(t[1]),this},t.prototype.stop=function(t){return this.pause(),this.reset(),"function"==typeof t&&t(),this},t.prototype.reset=function(){var t,n,i,e;for(e=this.bars,n=0,i=e.length;i>n;n++)for(t=e[n];t.childNodes[1];)t.removeChild(t.firstChild);return this},t}(),window.Sounder||(window.Sounder=t)}).call(this);