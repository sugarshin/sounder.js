/*!
 * @license sounder.js v0.12.0
 * (c) 2014 sugarshin https://github.com/sugarshin
 * License: MIT
 */
var __slice=[].slice;!function(t){"use strict";var e;return e=function(){function t(t){this.options=l({},this.defaults,t)}var e,n,i,r,o,s,a,u,l,c,h,p,m,d;return l=function(t){var e,n,i,r,o,s;for(t=t||{},e=r=1,o=arguments.length;o>=1?o>r:r>o;e=o>=1?++r:--r)if(arguments[e]){s=arguments[e];for(n in s)i=s[n],arguments[e].hasOwnProperty(n)&&(t[n]=i)}return t},c=function(t){var e,n,i,r,o;for(n=[],o=t.children,i=0,r=o.length;r>i;i++)e=o[i],8!==e.nodeType&&n.push(e);return n},p=function(){return Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)}}(),h=function(t,e){return Math.floor(Math.random()*(e-t+1))+t},d=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame||function(t){return window.setTimeout(t,1e3/60)}}(),u=function(){return window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||window.oCancelAnimationFrame||function(t){return window.clearTimeout(t)}}(),m=function(t){return t.parentNode.removeChild(t)},r=function(){var t,e,n,i,r,o,s,u,l,h,p;for(o=document.createElement("div"),o.className="sounder-wrapper",n=document.createDocumentFragment(),i=s=0,h=this.options.column;h>=0?h>s:s>h;i=h>=0?++s:--s)e=document.createElement("div"),e.className="sounder-col",r=document.createElement("div"),r.className="sounder-fragment",a.call(this,r),e.appendChild(r),n.appendChild(e);for(o.appendChild(n),this._bars=c(o),p=this._bars,u=0,l=p.length;l>u;u++)t=p[u],t.style.cssText="display: inline-block; vertical-align: bottom;";return this._wrapper=o,this._wrapper.style.cssText="height: "+1.5*this.options.size[1]*this.options.maxHeight+"px; line-height: "+1.5*this.options.size[1]*this.options.maxHeight+"px;"},n=function(){var t,e;return this._isPlaying=!0,e=(new Date).getTime(),(t=function(n){return function(){var r;return n._timerID=d(t),r=(new Date).getTime(),r-e>=100-n.options.speed?(i.call(n),e=(new Date).getTime()):void 0}}(this))()},a=function(t){var e,n;return p(this.options.color)?(n=this.options.color.length-1,e=this.options.color[h(0,n)]):e=this.options.color,t.style.cssText="width: "+this.options.size[0]+"px; height: "+this.options.size[1]+"px; margin: 0 1px "+Math.floor(this.options.size[1]/2)+"px; background: "+e+";"},o=function(t){return t.appendChild(this._wrapper)},e=function(t){var e;return e=document.createElement("div"),e.className="sounder-fragment",a.call(this,e),t.insertBefore(e,t.firstChild)},s=function(t){var e;return e=c(t),e[0].parentNode.removeChild(e[0])},i=function(){var t;return t=[],t[0]=e,t[1]=s,function(){var n,i,r,o,a,u;for(a=this._bars,u=[],r=0,o=a.length;o>r;r++)n=a[r],i=c(n).length,u.push(1===i?e.call(this,n):i===this.options.maxHeight?s.call(this,n):t[h(0,1)].call(this,n));return u}}(),t.prototype.defaults={size:[20,4],color:"#e74c3c",column:6,maxHeight:10,autoPlay:!1,speed:60},t.prototype.create=function(t){return r.call(this),o.call(this,t),this.options.autoPlay===!0&&n.call(this),this},t.prototype.play=function(t){return this._isPlaying!==!0&&(n.call(this),"function"==typeof t&&t()),this},t.prototype.pause=function(t){return this._isPlaying===!0&&(u(this._timerID),this._isPlaying=!1,"function"==typeof t&&t()),this},t.prototype.toggle=function(){var t;return t=1<=arguments.length?__slice.call(arguments,0):[],this._isPlaying!==!0?this.play(t[0]):this.pause(t[1]),this},t.prototype.stop=function(t){return this.pause(),this.reset(),"function"==typeof t&&t(),this},t.prototype.reset=function(){var t,e,n,i;for(i=this._bars,e=0,n=i.length;n>e;e++)for(t=i[e];t.childNodes[1];)t.removeChild(t.firstChild);return this},t.prototype.destroy=function(t){return u(this._timerID),null!=this._timerID&&(this._timerID=null),m(this._wrapper),"function"==typeof t?t():void 0},t}(),module.exports=e,t.Sounder||(t.Sounder=e)}((this||0).self||global);